---
name: code-architecture-analyzer
description: 智能代码架构解读和分析工具。当用户请求分析项目架构、生成架构文档、识别设计模式、分析依赖关系、评估代码质量、或理解复杂项目结构时使用此skill。适用于接手新项目、代码审查、重构规划、技术选型评估等场景。
allowed-tools:
  - Read
  - Glob
  - Grep
  - Bash
  - Task
metadata:
  version: "2.0.0"
  author: "Claude Code"
  category: "development"
  tags: ["architecture", "analysis", "code-review", "documentation", "patterns", "tech-stack"]
examples:
  - "分析这个项目的整体架构"
  - "生成详细的架构文档，包括设计模式和依赖关系"
  - "识别Unity项目中的性能瓶颈和优化机会"
  - "评估Python项目的代码质量和可维护性"
languages:
  - Python
  - JavaScript/TypeScript
  - C#/.NET
  - Java
  - Go
frameworks:
  - Django/Flask/FastAPI
  - React/Vue/Angular
  - Unity
  - ASP.NET
  - Spring Boot
---

# 代码架构分析师 v2.0

## 概述
专业的代码架构分析skill，能够深入解读各种编程语言和框架的项目架构，生成详细的架构文档，识别设计模式，分析依赖关系，并提供改进建议。

## 何时调用

### 触发关键词
当用户请求中包含以下内容时，应主动调用此skill：

| 关键词/意图 | 说明 |
|------------|------|
| "分析架构"、"架构分析"、"项目架构" | 需要了解项目的整体结构设计 |
| "生成架构文档"、"架构文档" | 需要输出结构化的架构说明文档 |
| "设计模式"、"使用了什么模式" | 需要识别代码中的设计模式 |
| "依赖关系"、"模块依赖" | 需要梳理模块间的调用关系 |
| "代码质量评估"、"代码质量" | 需要评估代码的可维护性 |
| "技术栈"、"使用了什么技术" | 需要识别项目使用的技术和框架 |
| "项目结构"、"目录结构" | 需要理解项目的组织方式 |
| "这个项目是怎么组织的" | 用户对项目结构不熟悉 |

### 适用场景

**1. 新项目接手**
- 初次接触代码库，需要快速理解项目结构
- 团队新成员入职培训

**2. 代码审查/重构**
- 重构前的架构现状评估
- 代码审查中的架构合理性检查
- 技术债务识别和优先级排序

**3. 文档生成**
- 生成或补充架构设计文档
- 创建技术方案说明文档
- 输出依赖关系图

**4. 技术选型**
- 评估现有架构是否满足新需求
- 对比不同架构方案的优劣

**5. 质量审计**
- 定期代码健康度检查
- 第三方库安全性审查
- 性能瓶颈分析

### 不适用的场景

- **简单的代码问题**：如单一文件的bug修复、小功能修改 → 直接处理即可
- **运行时调试**：如排查具体错误、性能分析 → 使用调试工具
- **代码搜索**：如查找某个函数、类或文件 → 使用 Glob/Grep 工具
- **单元测试**：编写或运行测试 → 直接操作测试文件

### 🏗️ 架构识别
- 自动识别项目类型（Unity/Python/JS/TS/C#/Java/Go）
- 技术栈分析（语言、框架、数据库、中间件）
- 架构模式检测（MVC/MVVM/微服务/分层架构等）
- 设计模式识别（单例/工厂/观察者/策略等23种模式）

### 📊 代码质量
- 代码结构评估（职责分离、复杂度、耦合度）
- 命名规范检查
- 最佳实践建议
- 技术债务识别

### 🔗 依赖分析
- 模块依赖关系图
- 外部依赖版本/兼容性分析
- 循环依赖检测
- 架构层次分析

### 📝 文档生成
- 执行摘要
- 详细架构分析
- 改进建议（P0/P1/P2优先级）
- Markdown格式报告

## 分析流程

```
1️⃣ 项目扫描
   ├─ 识别项目类型
   ├─ 检测技术栈
   └─ 确定架构风格

2️⃣ 深度分析
   ├─ 核心模块分析
   ├─ 设计模式检测
   └─ 代码质量评估

3️⃣ 报告生成
   ├─ 架构概览
   ├─ 模块说明
   ├─ 依赖关系图
   └─ 改进建议
```

## 支持的项目类型

| 类型 | 识别特征 | 专项分析 |
|------|----------|----------|
| **Unity** | Assets/, .unity | 组件架构、性能优化、资源管理 |
| **Python** | requirements.txt, setup.py | AI/ML、Web框架、数据处理流 |
| **JavaScript/TypeScript** | package.json, .ts/.js | 前端框架、状态管理、路由架构 |
| **C#/.NET** | .csproj, .sln | ASP.NET、WPF、架构模式 |
| **Java** | pom.xml, build.gradle | Spring Boot、Android |
| **Go** | go.mod, go.sum | 微服务、并发模式 |

## 使用示例

### 快速分析
```
分析这个项目的架构
```

### 完整分析
```
生成详细的架构分析报告，包括：
1. 技术栈和架构模式
2. 设计模式识别
3. 模块依赖关系
4. 代码质量评估
5. 改进建议
```

### 专项分析
```
分析Unity项目的性能优化机会：
- 内存分配和GC压力
- 渲染优化
- 组件通信效率
```

## 输出格式

生成的报告包含：
- 执行摘要（项目类型、技术栈、关键发现）
- 项目结构分析
- 技术栈详解
- 架构模式识别
- 代码质量评估
- 依赖关系分析
- 改进建议（按优先级）

## 配置文件

技能包含完整的架构模式配置：
- `config/patterns.yaml` - 23种设计模式定义
- 支持SOLID原则检测
- 识别反模式（God Object、Spaghetti Code等）
- 质量指标基准

---

*详见 prompt.md 获取完整使用说明*
